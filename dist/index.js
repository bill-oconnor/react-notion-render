var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n,l=/*#__PURE__*/t(e);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},r.apply(this,arguments)}function a(e,t){if(null==e)return{};var n,l,r={},a=Object.keys(e);for(l=0;l<a.length;l++)t.indexOf(n=a[l])>=0||(r[n]=e[n]);return r}exports.blockEnum=void 0,(n=exports.blockEnum||(exports.blockEnum={})).HEADING1="heading_1",n.HEADING2="heading_2",n.HEADING3="heading_3",n.PARAGRAPH="paragraph",n.TOGGLE_LIST="toggle",n.DOTS_LIST="bulleted_list_item",n.ENUM_LIST="numbered_list_item",n.ENUM_LIST_PARENT="numbered_list",n.CHECK_LIST="to_do",n.TITLE="title",n.VIDEO="video",n.IMAGE="image",n.EMBED="embed",n.FILE="file",n.PDF="pdf",n.BOOKMARK="bookmark",n.CALLOUT="callout",n.QUOTE="quote",n.DIVIDER="divider",n.CODE="code",n.SYNCED_BLOCK="synced_block",n.TABLE_OF_CONTENTS="table_of_contents",n.TABLE="table",n.TABLE_ROW="table_row",n.CHILD_PAGE="child_page",n.MENTION="mention";var o="unsupported";function c(){return l.default.createElement("div",{className:"rnr-empty-block"})}function u(e){return("\n  "+(e.bold?"rnr-bold":"")+"\n  "+(e.code?"rnr-inline-code":"")+"\n  "+(e.italic?"rnr-italic":"")+"\n  "+(e.strikethrough?"rnr-strikethrough":"")+"\n  "+(e.underline?"rnr-underline":"")+"\n  "+("default"!==e.color?"rnr-"+e.color:"")+"\n").trim()}function i(e){return"rnr-"+e}function s(e){var t=e.url,n=e.children,a=e.className,o=t.startsWith("#")?{}:{target:"_blank",rel:"noreferrer"};return l.default.createElement("a",r({href:t,className:a},o),n)}function m(e){var t=e.media;if(!t)return null;var n=t.href,r=l.default.createElement("img",{className:e.className,src:t.src,alt:t.alt});return n?l.default.createElement("a",{href:n,target:"_blank",rel:"noreferrer"},r):r}function p(e){var t=e.media,n=e.frameBorder;return t?l.default.createElement("iframe",{src:t.src,title:t.alt,className:"block "+e.className,frameBorder:null!=n?n:"0",allow:e.allow,allowFullScreen:e.allowFullScreen}):null}var d=[{name:"youtube",REGEXP:/(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/user\/\S+|\/ytscreeningroom\?v=))([\w\-]{10,12})\b/,getUrl:function(e){var t;return"https://www.youtube.com/embed/"+(null==(t=e.match(/(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/user\/\S+|\/ytscreeningroom\?v=|\/sandalsResorts#\w\/\w\/.*\/))([^\/&]{10,12})/))?void 0:t[1])}},{name:"googleDrive",REGEXP:/drive.google.com/,getUrl:function(e){var t=e.split("/");return t.pop(),t.join("/")+"/preview"}}],f={youtube:function(e,t,n){return l.default.createElement(p,{media:{alt:t,src:e},className:n,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},googleDrive:function(e,t,n){return l.default.createElement(p,{media:{alt:t,src:e},className:n,allow:"autoplay"})}};function E(e){var t=e.media,n=e.className;if(!t)return null;var r=t.src,a=t.alt,o=function(e,t,n){var l=d.find(function(t){return t.REGEXP.test(e)});return l?f[l.name](l.getUrl?l.getUrl(e):e,t,n):null}(r,a,n);return null!=o?o:l.default.createElement("video",{className:n,controls:!0},l.default.createElement("source",{src:r,type:"video/mp4"}),a)}var b=[{match:/-\[[^\]]*\]\((.*?)\s*("(?:.*[^"])")?\s*\)/,transformProps:function(e){var t=e.plain_text;return{media:{alt:t.split("-[")[1].split("]")[0],src:t.split("(")[1].split(")")[0],player:t.indexOf("#")<0?void 0:t.substr(t.indexOf("#")).replace("#","")}}},component:E},{match:/!\[[^\]]*\]\((.*?)\s*("(?:.*[^"])")?\s*\)/,transformProps:function(e){var t=e.plain_text;return{media:{alt:t.split("![")[1].split("]")[0],src:t.split("(")[1].split(")")[0],href:t.indexOf("#")<0?void 0:t.substr(t.indexOf("#")).replace("#","")}}},component:m},{match:/[[^\]]*\]\((.*?)\s*("(?:.*[^"])")?\s*\)/,transformProps:function(e){var t=e.plain_text,n=e.annotations;return{url:t.split("(")[1].split(")")[0],children:t.split("[")[1].split("]")[0],className:u(n)}},component:s}];function k(e){return function(t){var n=b.find(function(e){return e.match.test(t.plain_text)}),a=(null==n?void 0:n.component)||e;if(null!=n&&n.transformProps){var o=r({},t,n.transformProps(t));return l.default.createElement(a,r({},o))}return l.default.createElement(a,r({},t))}}var h=["block","blockComponentsMapper"],v=function(t){var n=t.block,o=t.blockComponentsMapper,c=a(t,h),i=c.text,m=c.annotations,p=c.type,d=c.href,f=c.plain_text,E=c.mapPageUrlFn,b=u(m);if(p===exports.blockEnum.MENTION){var k,v="page"===(null==(k=t.mention)?void 0:k.type)?{target:"_blank",rel:"noreferrer"}:{};if(n&&o&&o[exports.blockEnum.MENTION]){var T=o[exports.blockEnum.MENTION];return l.default.createElement(T,{block:n})}return l.default.createElement("a",r({className:"rnr-mention "+b,href:d},v),f)}if(!i)return null;var x=l.default.createElement(e.Fragment,null,i.content);if(b&&(x=l.default.createElement("span",{className:b},i.content)),m.bold?x=l.default.createElement("strong",{className:b},i.content):m.code?x=l.default.createElement("code",{className:b},i.content):m.italic?x=l.default.createElement("em",{className:b},i.content):m.strikethrough?x=l.default.createElement("s",{className:b},i.content):m.underline&&(x=l.default.createElement("u",{className:b},i.content)),i.link){var g=i.link.url;"/"===g[0]&&E&&(g=E(g.slice(1))),x=l.default.createElement(s,{url:g,className:b+" rnr-link"},x)}return x},T=k(v);function x(e){return e.toString().trim().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}var g=["emptyBlocks","slugifyFn","classNames","simpleTitles"];function N(e){return function(t){var n=t.emptyBlocks,o=t.slugifyFn,u=t.classNames,s=t.simpleTitles,m=a(t,g),p=m.block.hasContent();if(!p&&!n)return null;var d,f,E={checked:!1,children:null,plainText:"",slugifyFn:s?null:null!=o?o:x,className:u?i(m.block.notionType)+" "+(d=m.block.notionType,f=u,f[d]||""):void 0,config:{classNames:u,block:m.block,blockComponentsMapper:m.blockComponentsMapper,emptyBlocks:n}};return m.block.isMedia()?E.media=function(e){var t,n,l=e.block,r=l.getUrl();if(r){var a=r.match(/\/?([^/.]*)\.?([^/]*)$/);return{name:null!=(t=null==a?void 0:a[1])?t:"",extension:null!=(n=null==a?void 0:a[2].split("?")[0])?n:"",alt:l.getPlainText(),src:r}}}(m):E=r({},E,function(e){var t,n,a,o=e.block,c=e.mapPageUrlFn,u=o.getPlainText();return{checked:Boolean(null==(t=o.content)?void 0:t.checked),plainText:u,children:null==(n=o.content)?void 0:n.text.map(function(t,n){var a=v;return o.supportCustomComponents()&&!t.annotations.code&&(a=T),l.default.createElement(a,r({key:n},t,{mapPageUrlFn:c,blockComponentsMapper:e.blockComponentsMapper,block:o}))}),language:null==(a=o.content)?void 0:a.language,index:e.index,blockComponentsMapper:e.blockComponentsMapper}}(m)),p?l.default.createElement(e,r({},E)):l.default.createElement(c,null)}}function y(e){return l.default.createElement("input",{type:"checkbox",checked:e.checked,className:"_3M2EN",readOnly:!0})}var _=N(function(t){var n=t.children,a=t.config,o=t.checked,c=t.blockComponentsMapper,u=a.block,i=u.notionType,s=u.items,m=u.content;return l.default.createElement("li",{className:t.className},l.default.createElement(function(){return i===exports.blockEnum.CHECK_LIST?l.default.createElement(e.Fragment,null,l.default.createElement(y,{checked:o}),n):i===exports.blockEnum.TOGGLE_LIST&&s?l.default.createElement("details",null,l.default.createElement("summary",{className:"_O3LHz"},n),l.default.createElement("div",{className:"_p--Vo"},s.map(function(e){var t=e.getComponent(c);return t?l.default.createElement(t,r({},a,{key:e.id,block:e})):null}))):m?l.default.createElement("div",null,m.text.map(function(e,t){return l.default.createElement(v,r({key:t},e))})):l.default.createElement("p",null,n)},null))}),I=N(function(e){var t=e.config,n=t.block,a=n.notionType,o=n.items,c=(a===exports.blockEnum.CHECK_LIST||a===exports.blockEnum.TOGGLE_LIST?"_dzYFZ":"")+" "+e.className;return l.default.createElement(function(e){var t=e.children;return e.type===exports.blockEnum.ENUM_LIST_PARENT?l.default.createElement("ol",{className:c},t):l.default.createElement("ul",{className:c},t)},{type:a},null==o?void 0:o.map(function(e){return l.default.createElement(_,r({},t,{key:e.id,block:e}))}))}),C=N(function(e){var t=e.children,n=e.language,r=e.className;return n&&(r+=" language-"+x(n)),l.default.createElement("pre",null,l.default.createElement("code",{className:r},t))}),L=N(function(e){var t=e.media,n=e.className;return t?l.default.createElement(s,{url:t.src,className:"block "+(null!=n?n:"")},t.name,".",t.extension):null}),O=N(function(e){var t=e.plainText,n=e.slugifyFn,a=e.config.block.notionType,o=r({className:e.className,children:e.children},n?{id:n(t||"")}:{}),c=function(){return a===exports.blockEnum.HEADING2?l.default.createElement("h2",r({},o)):a===exports.blockEnum.HEADING3?l.default.createElement("h3",r({},o)):l.default.createElement("h1",r({},o))};return n?l.default.createElement("a",{href:"#"+n(t),className:"title"},l.default.createElement(c,null)):l.default.createElement(c,null)}),A=N(function(e){var t=e.config.block.content;return t?l.default.createElement("blockquote",{className:e.className},t.text.map(function(e,t){return l.default.createElement(T,r({key:t},e))})):null});function D(e){var t=e.id;return l.default.createElement("tr",{className:e.className},e.cells.map(function(e,n){return l.default.createElement("td",{key:"td-"+t+"-"+n},e.map(function(e,n){return l.default.createElement(T,r({},e,{key:"text-"+t+"-"+n}))}))}))}var S=N(function(e){var t=e.className,n=e.config.block,r=n.content,a=n.items,o=null==a?void 0:a.filter(function(e){var t=e.content;return null==t?void 0:t.cells});if(!o)return null;var c=(t+" "+(null!=r&&r.hasColumnHeader?"has-column-header":"")+" "+(null!=r&&r.hasRowHeader?"has-row-header":"")).trim();return l.default.createElement("table",{className:c},l.default.createElement("tbody",null,o.map(function(e){var t=e.content,n=e.id;return l.default.createElement(D,{className:i(e.notionType),cells:t.cells,key:n,id:n})})))}),M=N(function(e){var t,n=e.config.block.content;return n?l.default.createElement("div",{className:e.className},null==(t=n.icon)?void 0:t.emoji,l.default.createElement("span",null,n.text.map(function(e,t){return l.default.createElement(T,r({key:t},e))}))):null}),P=N(function(e){return l.default.createElement(l.default.Fragment,null,e.children)}),w=N(function(e){return l.default.createElement("p",{className:e.className},e.children)}),G=N(m),F=N(E),B=N(p);function H(e){var t=e.slugifyFn,n=e.plainText;return t?l.default.createElement("a",{href:"#"+t(n)},n):l.default.createElement(l.default.Fragment,null,n)}var R,U=N(function(e){var t=e.index,n=e.slugifyFn;return t?l.default.createElement("ul",{className:e.className},t.map(function(e){var t=e.plainText;return l.default.createElement("li",{key:e.id,className:i(e.type)},l.default.createElement(H,{slugifyFn:n,plainText:t}))})):null}),K=((R={})[exports.blockEnum.PARAGRAPH]=w,R[exports.blockEnum.HEADING1]=O,R[exports.blockEnum.HEADING2]=O,R[exports.blockEnum.HEADING3]=O,R[exports.blockEnum.DOTS_LIST]=I,R[exports.blockEnum.ENUM_LIST]=I,R[exports.blockEnum.ENUM_LIST_PARENT]=I,R[exports.blockEnum.CHECK_LIST]=I,R[exports.blockEnum.TOGGLE_LIST]=I,R[exports.blockEnum.VIDEO]=F,R[exports.blockEnum.FILE]=L,R[exports.blockEnum.PDF]=B,R[exports.blockEnum.EMBED]=B,R[exports.blockEnum.TITLE]=P,R[exports.blockEnum.IMAGE]=G,R[exports.blockEnum.CALLOUT]=M,R[exports.blockEnum.QUOTE]=A,R[exports.blockEnum.DIVIDER]=function(){return l.default.createElement("hr",null)},R[exports.blockEnum.CODE]=C,R[exports.blockEnum.TABLE_OF_CONTENTS]=U,R[exports.blockEnum.TABLE]=S,R[exports.blockEnum.TABLE_ROW]=void 0,R[exports.blockEnum.SYNCED_BLOCK]=void 0,R[exports.blockEnum.BOOKMARK]=void 0,R[exports.blockEnum.CHILD_PAGE]=void 0,R),j=/*#__PURE__*/function(){function e(t,n){this.id=void 0,this.notionType=void 0,this.items=void 0,this.content=void 0;var l=t.type,r=t[l];if(l&&r)if(this.id=t.id,this.notionType=l,t.type===exports.blockEnum.TITLE&&"title"in t)this.items=null,this.content={text:t.title};else if(t.type===exports.blockEnum.CHILD_PAGE)this.items=null,this.content={text:[r.title]};else if(this.isList()&&!n)this.content=null,this.items=[new e(t,!0)];else{var a,o,c,u=r.rich_text,i=r.text,s=r.checked,m=r.caption,p=r.type,d=r.external,f=r.file,E=r.url,b=r.icon,k=r.language,h=r.has_column_header,v=r.has_row_header,T=r.cells;this.items=null!=(a=null==(o=r.children)?void 0:o.map(function(t){return new e(t,!0)}))?a:null,this.content={text:null!=(c=null!=u?u:i)?c:[],checked:s,caption:m,type:p,external:d,file:f,url:E,icon:b,language:k,hasColumnHeader:h,hasRowHeader:v,cells:T}}}var t=e.prototype;return t.getComponent=function(e){return r({},K,e)[this.notionType]},t.getUrl=function(){var e;if(!this.content)return null;var t=null;if(this.isEmbed())t=this.content.url;else if(this.isMedia()&&null!=(e=this.content)&&e.type){var n;t=null==(n=this.content[this.content.type])?void 0:n.url}return t||null},t.getType=function(){switch(this.notionType){case exports.blockEnum.TOGGLE_LIST:case exports.blockEnum.DOTS_LIST:case exports.blockEnum.CHECK_LIST:case exports.blockEnum.ENUM_LIST:return"LIST";case exports.blockEnum.HEADING1:case exports.blockEnum.HEADING2:case exports.blockEnum.HEADING3:return"TITLE";case exports.blockEnum.FILE:case exports.blockEnum.VIDEO:case exports.blockEnum.IMAGE:case exports.blockEnum.PDF:case exports.blockEnum.EMBED:return"MEDIA";case exports.blockEnum.SYNCED_BLOCK:return"CONTAINER";case exports.blockEnum.TABLE:case exports.blockEnum.TABLE_OF_CONTENTS:return"TABLE";case exports.blockEnum.CODE:return"CODE";default:return"ELEMENT"}},t.getPlainText=function(){var e,t,n,l=this.isMedia()?null==(e=this.content)?void 0:e.caption:null==(t=this.content)?void 0:t.text;return null!=(n=null==l?void 0:l.map(function(e){return e.plain_text}).join(" "))?n:""},t.isList=function(){return"LIST"===this.getType()},t.isCode=function(){return"CODE"===this.getType()},t.isTitle=function(){return"TITLE"===this.getType()},t.isMedia=function(){return"MEDIA"===this.getType()},t.isEmbed=function(){return"MEDIA"===this.getType()&&this.notionType===exports.blockEnum.EMBED},t.isContainer=function(){return"CONTAINER"===this.getType()},t.isTable=function(){return"TABLE"===this.getType()},t.equalsType=function(e){return this.notionType===e},t.addItem=function(t){this.items||(this.items=[]),this.items.push(new e(t,!0))},t.hasContent=function(){var e;return this.getUrl()||""!==this.getPlainText().trim()||(null==(e=this.items)?void 0:e.length)||this.isTable()},t.supportCustomComponents=function(){return!this.isCode()},e}();function V(e){var t=e.filter(function(e){return e.type!==o});if(!t.length)return[];for(var n,l,r=[],a=0;a<t.length;a++){var c=r[r.length-1],u=new j(t[a]);c&&(l=u,(n=c).isList()&&n.equalsType(l.notionType))?c.addItem(t[a]):u.isContainer()&&u.items?r.push.apply(r,u.items):r.push(u)}return r}function q(e){for(var t,n=e.map(function(e){return new j(e)}),l=[],r=0;r<n.length;r++)n[r].isTitle()?l.push(n[r]):n[r].isContainer()&&n[r].items&&l.push.apply(l,n[r].items.filter(function(e){return e.isTitle()}));return null!=(t=l.map(function(e){var t;return{id:e.id,type:e.notionType,text:null==(t=e.content)?void 0:t.text,plainText:e.getPlainText()}}))?t:[]}exports.ParsedBlock=j,exports.Render=function(e){var t=e.blocks,n=e.classNames,r=void 0===n?{}:n,a=e.emptyBlocks,o=e.useStyles,c=e.slugifyFn,u=e.mapPageUrlFn,i=e.simpleTitles,s=e.blockComponentsMapper;if(!t||!t.length)return null;var m=V(t),p=q(t);return l.default.createElement(function(e){var t=e.children;return e.useStyles?l.default.createElement("div",{className:"rnr-container"},t):l.default.createElement(l.default.Fragment,null,t)},{useStyles:!!o},m.map(function(e){var t=e.getComponent(s);return t?l.default.createElement(t,{key:e.id,classNames:r,emptyBlocks:a,block:e,slugifyFn:c,mapPageUrlFn:u,simpleTitles:i,index:p,blockComponentsMapper:s}):null}))},exports.RenderText=T,exports.UNSUPPORTED_TYPE=o,exports.getBlocksToRender=V,exports.indexGenerator=q,exports.rnrSlugify=x,exports.withContentValidation=N,exports.withCustomComponent=k;
//# sourceMappingURL=index.js.map
