import e,{Fragment as t}from"react";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},n.apply(this,arguments)}function l(e,t){if(null==e)return{};var n,l,r={},a=Object.keys(e);for(l=0;l<a.length;l++)t.indexOf(n=a[l])>=0||(r[n]=e[n]);return r}var r;!function(e){e.HEADING1="heading_1",e.HEADING2="heading_2",e.HEADING3="heading_3",e.PARAGRAPH="paragraph",e.TOGGLE_LIST="toggle",e.DOTS_LIST="bulleted_list_item",e.ENUM_LIST="numbered_list_item",e.ENUM_LIST_PARENT="numbered_list",e.CHECK_LIST="to_do",e.TITLE="title",e.VIDEO="video",e.IMAGE="image",e.EMBED="embed",e.FILE="file",e.PDF="pdf",e.BOOKMARK="bookmark",e.CALLOUT="callout",e.QUOTE="quote",e.DIVIDER="divider",e.CODE="code",e.SYNCED_BLOCK="synced_block",e.TABLE_OF_CONTENTS="table_of_contents",e.TABLE="table",e.TABLE_ROW="table_row",e.CHILD_PAGE="child_page",e.MENTION="mention"}(r||(r={}));const a="unsupported";function s(){return e.createElement("div",{className:"rnr-empty-block"})}function c(e){return`\n  ${e.bold?"rnr-bold":""}\n  ${e.code?"rnr-inline-code":""}\n  ${e.italic?"rnr-italic":""}\n  ${e.strikethrough?"rnr-strikethrough":""}\n  ${e.underline?"rnr-underline":""}\n  ${"default"!==e.color?`rnr-${e.color}`:""}\n`.trim()}function o(e){return`rnr-${e}`}function i({url:t,children:l,className:r}){const a=t.startsWith("#")?{}:{target:"_blank",rel:"noreferrer"};return e.createElement("a",n({href:t,className:r},a),l)}function u({className:t,media:n}){if(!n)return null;const{src:l,alt:r,href:a}=n,s=e.createElement("img",{className:t,src:l,alt:r});return a?e.createElement("a",{href:a,target:"_blank",rel:"noreferrer"},s):s}function m({media:t,className:n,frameBorder:l,allow:r,allowFullScreen:a}){if(!t)return null;const{src:s,alt:c}=t;return e.createElement("iframe",{src:s,title:c,className:`block ${n}`,frameBorder:null!=l?l:"0",allow:r,allowFullScreen:a})}const p=[{name:"youtube",REGEXP:/(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/user\/\S+|\/ytscreeningroom\?v=))([\w\-]{10,12})\b/,getUrl:e=>{var t;return`https://www.youtube.com/embed/${null==(t=e.match(/(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/user\/\S+|\/ytscreeningroom\?v=|\/sandalsResorts#\w\/\w\/.*\/))([^\/&]{10,12})/))?void 0:t[1]}`}},{name:"googleDrive",REGEXP:/drive.google.com/,getUrl:e=>{const t=e.split("/");return t.pop(),`${t.join("/")}/preview`}}],E={youtube:(t,n,l)=>e.createElement(m,{media:{alt:n,src:t},className:l,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),googleDrive:(t,n,l)=>e.createElement(m,{media:{alt:n,src:t},className:l,allow:"autoplay"})};function d({media:t,className:n}){if(!t)return null;const{src:l,alt:r}=t,a=function(e,t,n){const l=p.find(t=>t.REGEXP.test(e));return l?E[l.name](l.getUrl?l.getUrl(e):e,t,n):null}(l,r,n);return null!=a?a:e.createElement("video",{className:n,controls:!0},e.createElement("source",{src:l,type:"video/mp4"}),r)}const h=[{match:/-\[[^\]]*\]\((.*?)\s*("(?:.*[^"])")?\s*\)/,transformProps:({plain_text:e})=>({media:{alt:e.split("-[")[1].split("]")[0],src:e.split("(")[1].split(")")[0],player:e.indexOf("#")<0?void 0:e.substr(e.indexOf("#")).replace("#","")}}),component:d},{match:/!\[[^\]]*\]\((.*?)\s*("(?:.*[^"])")?\s*\)/,transformProps:({plain_text:e})=>({media:{alt:e.split("![")[1].split("]")[0],src:e.split("(")[1].split(")")[0],href:e.indexOf("#")<0?void 0:e.substr(e.indexOf("#")).replace("#","")}}),component:u},{match:/[[^\]]*\]\((.*?)\s*("(?:.*[^"])")?\s*\)/,transformProps:({plain_text:e,annotations:t})=>({url:e.split("(")[1].split(")")[0],children:e.split("[")[1].split("]")[0],className:c(t)}),component:i}];function T(t){return l=>{const r=h.find(e=>e.match.test(l.plain_text)),a=(null==r?void 0:r.component)||t;if(null!=r&&r.transformProps){const t=n({},l,r.transformProps(l));return e.createElement(a,n({},t))}return e.createElement(a,n({},l))}}const f=["block","blockComponentsMapper"],g=a=>{const{block:s,blockComponentsMapper:o}=a,u=l(a,f),{text:m,annotations:p,type:E,href:d,plain_text:h,mapPageUrlFn:T}=u,g=c(p);if(E===r.MENTION){var N;const t="page"===(null==(N=a.mention)?void 0:N.type)?{target:"_blank",rel:"noreferrer"}:{};return s&&o&&o[r.MENTION]?e.createElement(o[r.MENTION],{block:s}):e.createElement("a",n({className:`rnr-mention ${g}`,href:d},t),h)}if(!m)return null;let y=e.createElement(t,null,m.content);if(g&&(y=e.createElement("span",{className:g},m.content)),p.bold?y=e.createElement("strong",{className:g},m.content):p.code?y=e.createElement("code",{className:g},m.content):p.italic?y=e.createElement("em",{className:g},m.content):p.strikethrough?y=e.createElement("s",{className:g},m.content):p.underline&&(y=e.createElement("u",{className:g},m.content)),m.link){let{link:{url:t}}=m;"/"===t[0]&&T&&(t=T(t.slice(1))),y=e.createElement(i,{url:t,className:`${g} rnr-link`},y)}return y};var N=T(g);function y(e){return e.toString().trim().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}const b=["emptyBlocks","slugifyFn","classNames","simpleTitles"];function k(t){return r=>{let{emptyBlocks:a,slugifyFn:c,classNames:i,simpleTitles:u}=r,m=l(r,b);const p=m.block.hasContent();if(!p&&!a)return null;let E={checked:!1,children:null,plainText:"",slugifyFn:u?null:null!=c?c:y,className:i?`${o(m.block.notionType)} ${d=m.block.notionType,h=i,h[d]||""}`:void 0,config:{classNames:i,block:m.block,blockComponentsMapper:m.blockComponentsMapper,emptyBlocks:a}};var d,h;return m.block.isMedia()?E.media=function(e){var t,n;const{block:l}=e,r=l.getUrl();if(!r)return;const a=r.match(/\/?([^/.]*)\.?([^/]*)$/);return{name:null!=(t=null==a?void 0:a[1])?t:"",extension:null!=(n=null==a?void 0:a[2].split("?")[0])?n:"",alt:l.getPlainText(),src:r}}(m):E=n({},E,function(t){var l,r,a;const{block:s,mapPageUrlFn:c}=t,o=s.getPlainText();return{checked:Boolean(null==(l=s.content)?void 0:l.checked),plainText:o,children:null==(r=s.content)?void 0:r.text.map((l,r)=>{let a=g;return s.supportCustomComponents()&&!l.annotations.code&&(a=N),e.createElement(a,n({key:r},l,{mapPageUrlFn:c,blockComponentsMapper:t.blockComponentsMapper,block:s}))}),language:null==(a=s.content)?void 0:a.language,index:t.index,blockComponentsMapper:t.blockComponentsMapper}}(m)),p?e.createElement(t,n({},E)):e.createElement(s,null)}}function v({checked:t}){return e.createElement("input",{type:"checkbox",checked:t,className:"_3M2EN",readOnly:!0})}var _=k(function({children:l,config:a,className:s,checked:c,blockComponentsMapper:o}){const{notionType:i,items:u,content:m}=a.block;return e.createElement("li",{className:s},e.createElement(()=>i===r.CHECK_LIST?e.createElement(t,null,e.createElement(v,{checked:c}),l):i===r.TOGGLE_LIST&&u?e.createElement("details",null,e.createElement("summary",{className:"_O3LHz"},l),e.createElement("div",{className:"_p--Vo"},u.map(t=>{const l=t.getComponent(o);return l?e.createElement(l,n({},a,{key:t.id,block:t})):null}))):m?e.createElement("div",null,m.text.map((t,l)=>e.createElement(g,n({key:l},t)))):e.createElement("p",null,l),null))}),I=k(function({className:t,config:l}){const{notionType:a,items:s}=l.block,c=`${a===r.CHECK_LIST||a===r.TOGGLE_LIST?"_dzYFZ":""} ${t}`;return e.createElement(t=>{const{children:n,type:l}=t;return e.createElement(l===r.ENUM_LIST_PARENT?"ol":"ul",{className:c},n)},{type:a},null==s?void 0:s.map(t=>e.createElement(_,n({},l,{key:t.id,block:t}))))}),L=k(function({className:t,children:n,language:l}){let r=t;return l&&(r+=` language-${y(l)}`),e.createElement("pre",null,e.createElement("code",{className:r},n))}),C=k(function({media:t,className:n}){if(!t)return null;const{src:l,name:r,extension:a}=t;return e.createElement(i,{url:l,className:`block ${null!=n?n:""}`},r,".",a)}),O=k(function({children:t,className:l,plainText:a,config:s,slugifyFn:c}){const{notionType:o}=s.block,i=n({className:l,children:t},c?{id:c(a||"")}:{}),u=()=>e.createElement(o===r.HEADING2?"h2":o===r.HEADING3?"h3":"h1",n({},i));return c?e.createElement("a",{href:`#${c(a)}`,className:"title"},e.createElement(u,null)):e.createElement(u,null)}),x=k(function({className:t,config:l}){const{block:{content:r}}=l;return r?e.createElement("blockquote",{className:t},r.text.map((t,l)=>e.createElement(N,n({key:l},t)))):null});function A({cells:t,className:l,id:r}){return e.createElement("tr",{className:l},t.map((t,l)=>e.createElement("td",{key:`td-${r}-${l}`},t.map((t,l)=>e.createElement(N,n({},t,{key:`text-${r}-${l}`}))))))}var D=k(function({className:t,config:n}){const{content:l,items:r}=n.block,a=null==r?void 0:r.filter(({content:e})=>null==e?void 0:e.cells);if(!a)return null;const s=`${t} ${null!=l&&l.hasColumnHeader?"has-column-header":""} ${null!=l&&l.hasRowHeader?"has-row-header":""}`.trim();return e.createElement("table",{className:s},e.createElement("tbody",null,a.map(({notionType:t,content:n,id:l})=>e.createElement(A,{className:o(t),cells:n.cells,key:l,id:l}))))}),S=k(function({className:t,config:l}){var r;const{block:{content:a}}=l;return a?e.createElement("div",{className:t},null==(r=a.icon)?void 0:r.emoji,e.createElement("span",null,a.text.map((t,l)=>e.createElement(N,n({key:l},t))))):null}),M=k(function({children:t}){return e.createElement(e.Fragment,null,t)}),G=k(function({children:t,className:n}){return e.createElement("p",{className:n},t)}),P=k(u),w=k(d),F=k(m);function $({slugifyFn:t,plainText:n}){return t?e.createElement("a",{href:`#${t(n)}`},n):e.createElement(e.Fragment,null,n)}var B=k(function({className:t,index:n,slugifyFn:l}){return n?e.createElement("ul",{className:t},n.map(({id:t,plainText:n,type:r})=>e.createElement("li",{key:t,className:o(r)},e.createElement($,{slugifyFn:l,plainText:n})))):null});const H={[r.PARAGRAPH]:G,[r.HEADING1]:O,[r.HEADING2]:O,[r.HEADING3]:O,[r.DOTS_LIST]:I,[r.ENUM_LIST]:I,[r.ENUM_LIST_PARENT]:I,[r.CHECK_LIST]:I,[r.TOGGLE_LIST]:I,[r.VIDEO]:w,[r.FILE]:C,[r.PDF]:F,[r.EMBED]:F,[r.TITLE]:M,[r.IMAGE]:P,[r.CALLOUT]:S,[r.QUOTE]:x,[r.DIVIDER]:()=>e.createElement("hr",null),[r.CODE]:L,[r.TABLE_OF_CONTENTS]:B,[r.TABLE]:D,[r.TABLE_ROW]:void 0,[r.SYNCED_BLOCK]:void 0,[r.BOOKMARK]:void 0,[r.CHILD_PAGE]:void 0};class R{constructor(e,t){this.id=void 0,this.notionType=void 0,this.items=void 0,this.content=void 0;const n=e.type,l=e[n];if(n&&l)if(this.id=e.id,this.notionType=n,e.type===r.TITLE&&"title"in e)this.items=null,this.content={text:e.title};else if(e.type===r.CHILD_PAGE)this.items=null,this.content={text:[l.title]};else if(this.isList()&&!t)this.content=null,this.items=[new R(e,!0)];else{var a,s,c;const{rich_text:e,text:t,checked:n,caption:r,type:o,external:i,file:u,url:m,icon:p,language:E,has_column_header:d,has_row_header:h,cells:T}=l;this.items=null!=(a=null==(s=l.children)?void 0:s.map(e=>new R(e,!0)))?a:null,this.content={text:null!=(c=null!=e?e:t)?c:[],checked:n,caption:r,type:o,external:i,file:u,url:m,icon:p,language:E,hasColumnHeader:d,hasRowHeader:h,cells:T}}}getComponent(e){return n({},H,e)[this.notionType]}getUrl(){var e;if(!this.content)return null;let t=null;if(this.isEmbed())t=this.content.url;else if(this.isMedia()&&null!=(e=this.content)&&e.type){var n;t=null==(n=this.content[this.content.type])?void 0:n.url}return t||null}getType(){switch(this.notionType){case r.TOGGLE_LIST:case r.DOTS_LIST:case r.CHECK_LIST:case r.ENUM_LIST:return"LIST";case r.HEADING1:case r.HEADING2:case r.HEADING3:return"TITLE";case r.FILE:case r.VIDEO:case r.IMAGE:case r.PDF:case r.EMBED:return"MEDIA";case r.SYNCED_BLOCK:return"CONTAINER";case r.TABLE:case r.TABLE_OF_CONTENTS:return"TABLE";case r.CODE:return"CODE";default:return"ELEMENT"}}getPlainText(){var e,t,n;const l=this.isMedia()?null==(e=this.content)?void 0:e.caption:null==(t=this.content)?void 0:t.text;return null!=(n=null==l?void 0:l.map(e=>e.plain_text).join(" "))?n:""}isList(){return"LIST"===this.getType()}isCode(){return"CODE"===this.getType()}isTitle(){return"TITLE"===this.getType()}isMedia(){return"MEDIA"===this.getType()}isEmbed(){return"MEDIA"===this.getType()&&this.notionType===r.EMBED}isContainer(){return"CONTAINER"===this.getType()}isTable(){return"TABLE"===this.getType()}equalsType(e){return this.notionType===e}addItem(e){this.items||(this.items=[]),this.items.push(new R(e,!0))}hasContent(){var e;return this.getUrl()||""!==this.getPlainText().trim()||(null==(e=this.items)?void 0:e.length)||this.isTable()}supportCustomComponents(){return!this.isCode()}}function U(e){const t=e.filter(({type:e})=>e!==a);if(!t.length)return[];const n=[];for(let e=0;e<t.length;e++){const a=n[n.length-1],s=new R(t[e]);a&&(r=s,(l=a).isList()&&l.equalsType(r.notionType))?a.addItem(t[e]):s.isContainer()&&s.items?n.push(...s.items):n.push(s)}var l,r;return n}function K(e){var t;const n=e.map(e=>new R(e)),l=[];for(let e=0;e<n.length;e++)n[e].isTitle()?l.push(n[e]):n[e].isContainer()&&n[e].items&&l.push(...n[e].items.filter(e=>e.isTitle()));return null!=(t=l.map(e=>{var t;return{id:e.id,type:e.notionType,text:null==(t=e.content)?void 0:t.text,plainText:e.getPlainText()}}))?t:[]}function j({blocks:t,classNames:n={},emptyBlocks:l,useStyles:r,slugifyFn:a,mapPageUrlFn:s,simpleTitles:c,blockComponentsMapper:o}){if(!t||!t.length)return null;const i=U(t),u=K(t);return e.createElement(t=>{const{useStyles:n,children:l}=t;return n?e.createElement("div",{className:"rnr-container"},l):e.createElement(e.Fragment,null,l)},{useStyles:!!r},i.map(t=>{const r=t.getComponent(o);return r?e.createElement(r,{key:t.id,classNames:n,emptyBlocks:l,block:t,slugifyFn:a,mapPageUrlFn:s,simpleTitles:c,index:u,blockComponentsMapper:o}):null}))}export{R as ParsedBlock,j as Render,N as RenderText,a as UNSUPPORTED_TYPE,r as blockEnum,U as getBlocksToRender,K as indexGenerator,y as rnrSlugify,k as withContentValidation,T as withCustomComponent};
//# sourceMappingURL=index.modern.mjs.map
